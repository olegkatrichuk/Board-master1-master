@using Microsoft.AspNetCore.Hosting.Server.Features
@using Microsoft.AspNetCore.Mvc.Localization

@model cloudscribe.Pagination.Models.PagedResult<MyBoard.Models.Advert>
@inject IViewLocalizer Localizer
@{
    ViewData["Title"] = "Home Page";
}

<style>
    @@font-face {
        font-family: 'FontAwesome';
        src: url('https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2') format('woff2'), url('https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.woff') format('woff'), url('https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/fonts/fontawesome-webfont.ttf') format('truetype');
        font-weight: normal;
        font-style: normal
    }

    .glyphicon {
        display: inline-block;
        font: normal normal normal 14px/1 FontAwesome;
        font-size: inherit;
        text-rendering: auto;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale
    }

    .glyphicon-chevron-right:before {
        content: "\f054";
    }

    .glyphicon-chevron-left:before {
        content: "\f053";
    }
</style>

@*<div>
        <link href="https://fonts.googleapis.com/css?family=Raleway:200,100,400" rel="stylesheet" type="text/css" />
        <h1 class="text-center text-info">
            Хотите
            <span class="txt-rotate"
                  data-period="2000"
                  data-rotate='[ " продать...", "купить...", "подарить...", "обменять...", "или еще что нибудь..." ]'></span>
        </h1>
        <h2 class="text-center text-dark ">Мы с радостью поможем в этом вам.</h2>
    </div>*@

<div class="container mt-4 p-4 rounded" style="background: bisque">
    <form asp-action="Search" asp-controller="Home" method="post">
        <div class="form-row">
            <div class="col-5">
                <input type="search" class="form-control" style="font-size: 20px" placeholder="@Localizer["String1"]" aria-label="Search" name="keyword" value="@ViewBag.keyword">
            </div>
            <div class="col-5" id="app">
                <select type="text" class="form-control " style="font-size: 20px" v-model="selectedCity" name="selectedCity">
                    <option value="" disabled selected>
                        @Localizer["String2"]
                    </option>
                    <option v-for="city in cities" v-bind:value="city">
                        {{city}}
                    </option>
                </select>
            </div>
            <div class="col-2">
                <button type="submit" class="btn btn-primary " style="font-size: 20px;">@Localizer["String3"]</button>
            </div>
        </div>

    </form>
</div>
<div class="container m-4 p-1" style="font-size: 20px">
    <div class="row">
        <div class="col-4 bg-light text-dark">
            <div class="row">
                <div class="col-2">
                    <img class="d-none d-sm-block " src="~/img/house.png" />
                </div>
                <div class="col-10">
                    <a asp-action="SearchByCategory" asp-route-keyword="Недвижимость"> @Localizer["String4"]</a>
                </div>
            </div>
        </div>
        <div class="col-4 bg-light text-dark">
            <div class="row">
                <div class="col-2">
                    <img class="d-none d-sm-block" src="~/img/car.png" />
                </div>
                <div class="col-10">
                    <a asp-action="SearchByCategory" asp-route-keyword="Транспорт"> @Localizer["String5"]</a>
                </div>
            </div>
        </div>
        <div class="col-4 bg-light text-dark">
            <div class="row">
                <div class="col-2">
                    <img class="d-none d-sm-block m-1" src="~/img/work.png" />
                </div>
                <div class="col-10 d-flex">
                    <a asp-action="SearchByCategory" asp-route-keyword="Работа">@Localizer["String6"]</a>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-4  bg-light text-dark">
            <div class="row">
                <div class="col-2">
                    <img class="d-none d-sm-block m-1 " src="~/img/animal.png" />
                </div>
                <div class="col-10 ">
                    <a asp-action="SearchByCategory" asp-route-keyword="Животные">@Localizer["String7"]</a>
                </div>
            </div>
        </div>
        <div class="col-4 bg-light text-dark">
            <div class="row">
                <div class="col-2">
                    <img class="d-none d-sm-block " src="~/img/tv.png" />
                </div>
                <div class="col-10 ">
                    <a asp-action="SearchByCategory" asp-route-keyword="Электроника">@Localizer["String8"]</a>
                </div>
            </div>
        </div>
        <div class="col-4 bg-light text-dark">
            <div class="row">
                <div class="col-2">
                    <img class="d-none d-sm-block m-1" src="~/img/ball.png" />
                </div>
                <div class="col-10 d-flex">
                    <a asp-action="SearchByCategory" asp-route-keyword="Спорт">@Localizer["String9"]</a>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-4 bg-light text-dark">
            <div class="row">
                <div class="col-2">
                    <img class="d-none d-sm-block " src="~/img/help.png" />
                </div>
                <div class="col-10">
                    <a asp-action="SearchByCategory" asp-route-keyword="Услуги">@Localizer["String10"]</a>
                </div>
            </div>
        </div>
        <div class="col-4 bg-light text-dark">
            <div class="row">
                <div class="col-2">
                    <img class="d-none d-sm-block " src="~/img/T-short.png" />
                </div>
                <div class="col-10 d-flex">
                    <a asp-action="SearchByCategory" asp-route-keyword="Одежда">@Localizer["String11"]</a>
                </div>
            </div>
        </div>
        <div class="col-4 bg-light text-dark">
            <div class="row">
                <div class="col-2">
                    <img class="d-none d-sm-block " src="~/img/boj.png" />
                </div>
                <div class="col-10 d-flex">
                    <a asp-action="SearchByCategory" asp-route-keyword="Дети">@Localizer["String12"]</a>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-4 bg-light text-dark">
            <div class="row">
                <div class="col-2 pt-1">
                    <img class="d-none d-sm-block " src="~/img/workh.png" />
                </div>
                <div class="col-10 d-flex">
                    <a asp-action="SearchByCategory" asp-route-keyword="Запчасти">@Localizer["String13"]</a>
                </div>
            </div>
        </div>
        <div class="col-4 bg-light text-dark">
            <div class="row">
                <div class="col-2 pt-1">
                    <img class="d-none d-sm-block " src="~/img/change.png" />
                </div>
                <div class="col-10 d-flex">
                    <a asp-action="SearchByCategory" asp-route-keyword="Обмен">@Localizer["String14"]</a>
                </div>
            </div>
        </div>
        <div class="col-4 bg-light text-dark">
            <div class="row">
                <div class="col-2 pt-1">
                    <img class="d-none d-sm-block " src="~/img/surprize.png" />
                </div>
                <div class="col-10 d-flex ">
                    <a asp-action="SearchByCategory" asp-route-keyword="Подарю">@Localizer["String15"]</a>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-4 bg-light text-dark">
            <div class="row">
                <div class="col-2 pt-1">
                    <img class="d-none d-sm-block " src="~/img/vacation.png" />
                </div>
                <div class="col-10 d-flex ">
                    <a asp-action="SearchByCategory" asp-route-keyword="Отдых">@Localizer["String16"]</a>
                </div>
            </div>
        </div>
        <div class="col-4 bg-light text-dark">
            <div class="row">
                <div class="col-2 pt-1">
                    <img class="d-none d-sm-block " src="~/img/business.png" />
                </div>
                <div class="col-10 d-flex ">
                    <a asp-action="SearchByCategory" asp-route-keyword="Бизнес">@Localizer["String17"]</a>
                </div>
            </div>
        </div>
        <div class="col-4"></div>
    </div>
</div>

<div class="container  align-self-center " style="display: flex">
    @{ int i = 3;}
    @foreach (var item in Model.Data)
    {

        if (i > 0 && i % 3 == 0)
        {
        @:</div><div class="row">
        }
        <div class="card p-3 m-3 " style="width: 21rem; ">
            <div class="card-img-top">
                @{
                    var photoPath = "";
                    if (item.AdvertPhotos.Any())
                    {
                        photoPath = "~/images/" + (item.AdvertPhotos[0].PhotoPath);
                    }
                    else
                    {
                        photoPath = "noimage.jpg";
                    }
                        
                }
                <img class="rounded img-fluid" src="@photoPath" asp-append-version="true" style="max-width: 320px; max-height: 200px;" />
            </div>
            <div class="card-inner">
                <div class="header">
                    <h2 style="white-space: nowrap; overflow: hidden;">@item.Title</h2>
                    <h2>
                        @item.Price
                    </h2>
                </div>
                <div class="row card-footer justify-content-center">
                    <a asp-controller="Home" asp-action="DetailsAdvert" asp-route-id="@item.Id" class="btn btn-info rounded">@Localizer["String18"]</a>
                </div>
            </div>
        </div>
        i++;
    }

</div>
<hr />
<div class="container">
    <cs-pager cs-paging-pagenumber=(int)@Model.PageNumber
              cs-paging-totalitems=(int)Model.TotalItems
              cs-paging-pagesize=@Model.PageSize
              cs-pagenumber-param="pagenumber"
              asp-controller="Home"
              asp-action="Index"
              cs-pager-li-current-class="page-item active"
              cs-pager-li-other-class="page-item"
              cs-pager-li-non-active-class="page-item disabled"
              cs-pager-link-current-class="page-link"
              cs-pager-link-other-class="page-link">
    </cs-pager>
</div>

@section Scripts
{

    <environment include="Development">
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    </environment>
    <environment exclude="Development">
        <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
    </environment>
    <script>
        var app = new Vue({
            el: '#app',
            data: {
                selectedCity: '',
                cities: [
                    '@Localizer["String19"]', '@Localizer["String20"]', '@Localizer["String21"]', '@Localizer["String22"]', '@Localizer["String23"]', '@Localizer["String24"]', '@Localizer["String25"]', '@Localizer["String26"]', '@Localizer["String27"]', '@Localizer["String28"]', '@Localizer["String29"]',
                    '@Localizer["String30"]', '@Localizer["String31"]', '@Localizer["String32"]', '@Localizer["String33"]', '@Localizer["String34"]', '@Localizer["String35"]', '@Localizer["String36"]', '@Localizer["String37"]', '@Localizer["String38"]', '@Localizer["String39"]', '@Localizer["String40"]', '@Localizer["String41"]', '@Localizer["String42"]'
                ]
            }

        });
    </script>
}
